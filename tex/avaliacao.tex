\section{An\'alise de Requisitos}
Requisitos
\begin{itemize}
    \item Coletar dados do ambiente
    \item Padroniza\c{c}\~ao na comunica\c{c}\~ao para facilitar a interconex\~ao dos sistemas.
    \item Extens\'ivel: Podendo ser reutilizada em diversas arquiteturas.
    \item Eficiente em:
        \begin{itemize}
            \item Energia: cosumir pouca energia para longa durabilidade com bateria.
            \item Valor: utilizar uma infraestrutura de hardware simples para realizar as tarefas.
        \end{itemize}
\end{itemize}
\section{An\'alise Funcional}
\subsection{Limita\c{c}\~oes Funcionais}
A falta de uma implementaca\c{c}\~ao segura, utilizando os padr\~oes DTLS.
\section{An\'alise Estrutural}
\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\footnotesize,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
}
A biblioteca utilizada para montar o pacote CoAP foi:
\begin{lstlisting}
    https://github.com/staropram/cantcoap.git
\end{lstlisting} onde sou colaborador e enviei algumas melhorias para a biblioteca.
Alguns testes para validar a correta execu\c{c}\~ao dos algoritmos utilizados, as altera\c{c}\~oes podem ser visualisadas aqui:
\begin{lstlisting}
    https://github.com/staropram/cantcoap/commits?author=rafaeldelucena.
\end{lstlisting}

Para o funcionamento desta biblioteca no EPOS, e para utilizar uma MTU limitada a 128 bytes utilizo um buffer com um valor m\'aximo e armazeno os dados do pacote no buffer. Foi necess\'ario alterar os tipos das vari\'aveis para se adquerem ao EPOS.

O desenvolvimento de um mecanismo de retransmiss\~ao de mensagens n\~ao-confirmadas utilizando uma lista ordenada. Mecanismo de requisic\c{c}\~o e resposta, as requisi\c{c}\~oes pendentes foram armezenadas num Hash com a chave sendo o token gerado pelo cliente.

Para validar o comportamento utilizei alguns testes da pr\'opria biblioteca CoAP portados para o EPOS. Foi necess\'ario implementar a func\c{c}\~ao assert.

O tempo de execu\c{c}\~ao das principais fun\c{c}\~oes foi medido. Abaixo uma tabela comparativa com as diversas arquituras e opera\c{c}\~oes entres as principais solu\c{c}\~oes livres.

\begin{table}[h]
\begin{tabular}{@{}lllll@{}}
\toprule
Operating System & CoAP & Size &  Memory &  &  \\ \midrule
EPOS &  CantCoap &  &  &  \\
Contiki &  Erbium &  &  &  \\
Contiki &  libcoap &  &  &  \\
TinyOS &  libcoap &  &  &  \\ \bottomrule
\end{tabular}
\end{table}

\section{An\'alise de Desempenho}
exemplo
\lstdefinestyle{customc}{
  belowcaptionskip=1\baselineskip,
  breaklines=true,
  xleftmargin=\parindent,
  language=C,
  showstringspaces=false,
  basicstyle=\footnotesize\ttfamily,
  keywordstyle=\bfseries\color{green!40!black},
  commentstyle=\itshape\color{purple!40!black},
  identifierstyle=\color{blue},
  stringstyle=\color{orange},
}

\lstdefinestyle{customasm}{
  belowcaptionskip=1\baselineskip,
  frame=L,
  xleftmargin=\parindent,
  language=[x86masm]Assembler,
  basicstyle=\footnotesize\ttfamily,
  commentstyle=\itshape\color{purple!40!black},
}

\lstset{escapechar=@,style=customc}

\begin{lstlisting}
#include <stdio.h>
#define N 10
/* Block
 * comment */
 
int main()
{
    int i;
 
    // Line comment.
    puts("Hello world!");
 
    for (i = 0; i < N; i++)
    {
        puts("LaTeX is also great for programmers!");
    }
 
    return 0;
}
\end{lstlisting}
